---
title: 复制
date: 2019-06-20 09:53:03
tags:
---

## 使用`document.execCommand("Copy");`来实现把复制的内容复制到粘贴板

---

### 思路

- 创建 input 框，value 值为需要复制的内容
- 使用 getElementById 获取 input 框
- 调用.select()方法选中 input 框的内容
- 最后调用 document.execCommand("Copy") 实现复制

---

### 具体代码

html:
`<input value="copy的内容" id="copy" />`

js:

```javascript
const urlLink = document.getElementById("copy");
urlLink.select();
document.execCommand("copy");
message.success("分享链接已复制成功！", 1);
```

---

### 遇到的问题及解决方案

1. 如果不想显示input框，可以将input框的opacity属性设置为0，在使用绝对定位使其脱离文档流。注意，**不能将input框的display属性设置为none或将visibility设置为hidden，这会导致复制失败**

2. ie之外的浏览器 document.execCommand("copy");这个必须在**由用户操作触发的点击事件线程中执行**，在axios异步的回调函数中执行是不允许的。解决的方案是使用async和await，将异步的操作变为同步即可

---
