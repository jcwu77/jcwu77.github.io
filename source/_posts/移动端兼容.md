---
title: 移动端踩过的坑
date: 2019-06-19 18:29:31
tags:
---

## IOS

1. new Date 中指定的字符串的格式为 new Date("2018/04/27 11:11")，其余格式需转化，例`new Date(("2018-04-27 11:11").replace(/-/g, "/"))`

2. Safari 浏览器中的弹性滑动属性-webkit-overflow-scrolling: touch 会导致 z-index 属性失效，解决的方法是通过设置`transform: translateZ(1px)`，1px 中的 1 用来代表层级

## Android

1. 软键盘呼起会使 webview 高度变小，并且 fixed 定位元素会跟着键盘上移。解决的方法是通过 js 获取软键盘呼起前后的饰扣高度差，将 fixed 元素的 marginTop 设置为这个差值。具体代码：

```javascript
const height = document.body.offsetHeight; // 获取软键盘呼起前视图容器高度
window.onresize = function() {
  if (document.body.offsetHeight < height) {
    document.getElementById("footer").style.marginTop = `${(height -
      document.body.offsetHeight) /
      10}rem`;
    document.getElementById("footer").style.position = "static";
  } else {
    document.getElementById("footer").style.position = "absolute";
  }
};
```
